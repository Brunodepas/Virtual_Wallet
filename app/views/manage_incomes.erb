<link rel="stylesheet" href="/css/layout.css"> <!-- Ya lo usÃ¡s -->
<link rel="stylesheet" href="/css/incomesAdm.css?v=<%= Time.now.to_i %>">

<div class="panel">
    <h3>Ingresos Pendientes</h3>

    <% if @notice %>
      <p class="notice"><%= @notice %></p>
    <% end %>

    <% if @error %>
      <p class="error"><%= @error %></p>
    <% end %>

    <% if @movements.empty? %>
      <p class="empty-msg">No hay ingresos pendientes</p>
    <% else %>
      <div class="movements-list">
        <% @movements.each do |movement| %>
          <div class="historial-item">
            <div>
              <span class="movement-id">ID: <%= movement.id %></span>
              <span class="movement-amount">Monto: $<%= sprintf('%.2f', movement.amount) %></span>
              <span class="movement-date">Fecha: <%= movement.date.in_time_zone("Buenos Aires").strftime("%d/%m/%Y %H:%M") %></span>
              <span class="movement-user">Cuenta de Origen: <%= movement.origin&.alias || "Sin cuenta" %></span>
              <span class="movement-type">Estado: <%= movement.status %></span>
            </div>
            <div class="movement-actions">
              <form action="/manage_incomes/<%= movement.id %>/accept" method="post" onsubmit="this.querySelector('button').disabled = true;">
                <button type="submit" class="accept-btn">Aceptar</button>
              </form>
              <form action="/manage_incomes/<%= movement.id %>/reject" method="post">
                <button type="submit" class="reject-btn">Rechazar</button>
              </form>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>

    <div class="back-link">
      <a href="/home">Volver al inicio</a>
    </div>
</div>

